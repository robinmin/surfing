---
import { ADS } from 'astrowind:config'

interface Props {
  client?: string
  slot?: string
  layout?: 'display' | 'in-article' | 'fluid'
  format?: string
  responsive?: 'true' | 'false'
  style?: string
}

const {
  client: clientProp,
  slot: slotProp,
  layout = 'display',
  format = 'auto',
  responsive = 'false',
  style = 'display:block; width:100%; min-height:250px;',
} = Astro.props

const client = clientProp || ADS.google?.client || ''
const slot = slotProp || ADS.google?.slots?.default || ''

if (!client) {
  throw new Error('GoogleAd component requires a valid `client` id.')
}

if (!slot) {
  throw new Error('GoogleAd component requires a valid `slot` id.')
}
---

<div class="google-ad" data-ad-slot={slot}>
  <ins
    class="adsbygoogle"
    style={style}
    data-ad-client={client}
    data-ad-slot={slot}
    data-ad-format={format}
    data-full-width-responsive={responsive}
    data-ad-layout={layout === 'display' ? undefined : layout}></ins>
</div>

<!--
  Note: GoogleAdsLoader component in the layout handles ALL Google Ads initialization:
  - Loading the AdSense script
  - Pushing all ad slots to the queue
  - Managing consent

  This component only renders the HTML structure for this specific ad slot.
  No additional JavaScript is needed here.
-->
